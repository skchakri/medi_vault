<%= form_with(model: [:admin, @alert_type], local: true, class: "space-y-6") do |form| %>
  <% if @alert_type.errors.any? %>
    <div class="bg-red-50 border border-red-200 rounded-lg p-4">
      <div class="flex">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4v.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
        </div>
        <div class="ml-3">
          <h3 class="text-sm font-medium text-red-800"><%= pluralize(@alert_type.errors.count, "error") %> prohibited this alert type from being saved:</h3>
          <ul class="mt-2 list-disc list-inside text-sm text-red-700">
            <% @alert_type.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>
  <% end %>

  <!-- Name -->
  <div>
    <%= form.label :name, class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.text_field :name, class: "block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-purple-500 focus:border-purple-500", placeholder: "e.g., 30-Day Warning" %>
  </div>

  <!-- Offset Days -->
  <div>
    <%= form.label :offset_days, "Days Before Expiry", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.number_field :offset_days, class: "block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-purple-500 focus:border-purple-500", placeholder: "30" %>
    <p class="mt-1 text-sm text-gray-500">Alert will trigger this many days before credential expiration</p>
  </div>

  <!-- Description -->
  <div>
    <%= form.label :description, class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.text_area :description, rows: 3, class: "block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-purple-500 focus:border-purple-500", placeholder: "Optional description of this alert type" %>
  </div>

  <!-- Priority -->
  <div>
    <%= form.label :priority, class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.number_field :priority, class: "block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-purple-500 focus:border-purple-500", placeholder: "0" %>
    <p class="mt-1 text-sm text-gray-500">Lower numbers display first. Used for sorting alerts.</p>
  </div>

  <!-- User Plans -->
  <div>
    <%= form.label :user_plans, "Applicable Plans", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <div class="space-y-2">
      <% ['free', 'basic', 'pro'].each do |plan| %>
        <div class="flex items-center">
          <%= form.check_box :user_plans, { multiple: true, class: "h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500" }, plan, nil %>
          <%= form.label :user_plans, plan.capitalize, { class: "ml-2 block text-sm text-gray-700" } %>
        </div>
      <% end %>
    </div>
    <p class="mt-2 text-sm text-gray-500">Select which plans this alert type applies to</p>
  </div>

  <!-- Notification Channels -->
  <div>
    <%= form.label :notification_channels, "Notification Channels", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <div class="space-y-2">
      <% ['email', 'sms', 'in_app'].each do |channel| %>
        <div class="flex items-center">
          <%= form.check_box :notification_channels, { multiple: true, class: "h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500" }, channel, nil %>
          <%= form.label :notification_channels, channel.upcase, { class: "ml-2 block text-sm text-gray-700" } %>
        </div>
      <% end %>
    </div>
    <p class="mt-2 text-sm text-gray-500">Choose how users will be notified of this alert</p>
  </div>

  <!-- Active Status -->
  <div class="flex items-center">
    <%= form.label :active, class: "flex items-center cursor-pointer" do %>
      <%= form.check_box :active, { class: "h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500" } %>
      <span class="ml-2 text-sm font-medium text-gray-700">Active</span>
    <% end %>
    <p class="ml-2 text-sm text-gray-500">Inactive alert types will not be applied to new credentials</p>
  </div>

  <!-- Form Actions -->
  <div class="flex gap-3 pt-6 border-t border-gray-200">
    <%= form.submit class: "inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 transition-colors" %>
    <%= link_to "Cancel", admin_alert_types_path, class: "inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors" %>
  </div>
<% end %>
