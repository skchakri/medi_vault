<%# Mobile Card View for Credential %>
<div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow relative border border-gray-200">
  <!-- Checkbox for selection -->
  <div class="absolute top-4 right-4">
    <input type="checkbox"
           data-credential-selection-target="checkbox"
           data-credential-id="<%= credential.id %>"
           data-action="change->credential-selection#toggleCredential"
           class="h-5 w-5 text-purple-600 rounded border-gray-300 focus:ring-purple-500 cursor-pointer">
  </div>

  <!-- Status Badge -->
  <div class="mb-3">
    <% if credential.expired? %>
      <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800 uppercase">
        Expired
      </span>
    <% elsif credential.expiring_soon? %>
      <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800 uppercase">
        Expiring Soon
      </span>
    <% else %>
      <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800 uppercase">
        Active
      </span>
    <% end %>
  </div>

  <!-- Credential Name & ID -->
  <div class="mb-3 pr-8">
    <h3 class="text-lg font-semibold text-gray-900 mb-1"><%= credential.title %></h3>
    <p class="text-sm text-gray-500">ID: <%= credential.credential_number || 'N/A' %></p>
  </div>

  <!-- Issuer -->
  <div class="mb-3">
    <p class="text-xs text-gray-500 uppercase font-medium mb-1">Issuer</p>
    <p class="text-sm text-gray-900"><%= credential.issuing_organization || 'N/A' %></p>
  </div>

  <!-- Tags -->
  <div class="mb-3">
    <p class="text-xs text-gray-500 uppercase font-medium mb-1">Type</p>
    <div class="flex flex-wrap gap-1">
      <% if credential.tags.any? %>
        <% credential.tags.limit(3).each do |tag| %>
          <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
                style="background-color: <%= tag.color %>20; color: <%= tag.color %>; border: 1px solid <%= tag.color %>40;">
            <%= tag.name %>
          </span>
        <% end %>
        <% if credential.tags.count > 3 %>
          <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600">
            +<%= credential.tags.count - 3 %>
          </span>
        <% end %>
      <% else %>
        <span class="text-sm text-gray-400">No tags</span>
      <% end %>
    </div>
  </div>

  <!-- Expiration Date -->
  <div class="mb-4">
    <p class="text-xs text-gray-500 uppercase font-medium mb-1">Expiration</p>
    <p class="text-sm text-gray-900"><%= credential.displayable_end_date %></p>
  </div>

  <!-- Actions -->
  <div class="flex items-center gap-4 pt-3 border-t border-gray-200">
    <%= link_to credential_path(credential), class: "flex items-center gap-2 text-purple-600 hover:text-purple-800 transition-colors" do %>
      <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
      </svg>
      <span class="text-sm font-medium">View</span>
    <% end %>
    <%= link_to edit_credential_path(credential), class: "flex items-center gap-2 text-blue-600 hover:text-blue-800 transition-colors" do %>
      <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
      </svg>
      <span class="text-sm font-medium">Edit</span>
    <% end %>
    <%= link_to credential_path(credential), data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' }, class: "flex items-center gap-2 text-red-600 hover:text-red-800 transition-colors" do %>
      <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
      </svg>
      <span class="text-sm font-medium">Delete</span>
    <% end %>
  </div>
</div>
